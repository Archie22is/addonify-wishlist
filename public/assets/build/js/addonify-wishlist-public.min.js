!function(f){"use strict";f(document).ready(function(){var o=f("body"),s=f("#addonify-wishlist-modal-wrapper"),d=f("#addonify-wishlist-modal-response"),i=f("#addonify-wishlist-show-sidebar-btn"),a=f("ul.adfy-wishlist-sidebar-items-entry"),e=f(".addonify-wishlist-count"),n=addonify_wishlist_object.show_popup,t="addonify-overlay-btn-wrapper",l="addonify-overlay-btn",c=f("."+t),r=f(".addonify-overlay-buttons");function h(i,t,s){f(".adfy-wishlist-icon-entry .adfy-wishlist-icon").hide(),f(".adfy-wishlist-icon-entry .adfy-wishlist-icon.adfy-status-"+s).show(),d.html(i.replace("{product_name}",t)),o.addClass("addonify-wishlist-modal-is-open")}function _(){return addonify_wishlist_object.require_login&&!addonify_wishlist_object.is_logged_in&&(addonify_wishlist_object.redirect_to_login&&!addonify_wishlist_object.is_logged_in?window.location.replace(addonify_wishlist_object.login_url):h(addonify_wishlist_object.login_msg,"","error"),1)}c.length?r.each(function(){var i=f("button."+l,this).clone();f("button."+l,this).remove(),f("."+t,this).append(i)}):(r.each(function(){f("button."+l,this).wrapAll('<div class=" '+t+' " />')}),c=f("img.attachment-woocommerce_thumbnail").height(),f("."+t).css("height",c+"px"),f("."+t).hover(function(){f(this).css("opacity",1)},function(){f(this).css("opacity",0)})),f(".addonify-add-to-wishlist-btn button.added-to-wishlist").attr("disabled",!0),o.on("click",".addonify-add-to-wishlist-btn",function(i){var t;i.preventDefault(),_()||(f(this).hasClass("added-to-wishlist")?n&&h(addonify_wishlist_object.product_already_in_wishlist_text,f(this).data("product_name")):(t=this,i={action:addonify_wishlist_object.action,id:f(t).data("product_id"),nonce:addonify_wishlist_object.nonce},_()||(s.addClass("loading"),f.post(addonify_wishlist_object.ajax_url,i,function(i){s.removeClass("loading"),console.log(i),1==i.success?(f(t).trigger("addonify_added_to_wishlist"),f("#addonify-wishlist-sidebar-form .empty-wishlist").remove(),f(t).addClass("added-to-wishlist"),n?h(addonify_wishlist_object.product_added_to_wishlist_text,f(t).data("product_name"),"success"):("1"===addonify_wishlist_object.redirect_to_wishlist_if_popup_disabled&&window.location.replace(addonify_wishlist_object.wishlist_page_url),f(".addonify-wishlist-btn-label",t).text(addonify_wishlist_object.product_adding_to_wishlist_btn_label),f(t).attr("disabled",!0)),a.append(i.data.msg),e.text(i.data.wishlist_count),f(t).hasClass("addonify-custom-wishlist-btn")||(f(".addonify-wishlist-btn-label",t).text(addonify_wishlist_object.product_added_to_wishlist_btn_label),f("i.icon.heart-o-style-one",t).removeClass("heart-o-style-one").addClass("heart-style-one"))):h(addonify_wishlist_object.wishlist_not_added_label,f(t).data("product_name"),"error")},"json"))))}),o.on("click","#addonify-wishlist-close-modal-btn",function(){o.removeClass("addonify-wishlist-modal-is-open")}),o.on("click","#addonify-wishlist-view-wishlist-btn",function(){window.location.href=addonify_wishlist_object.wishlist_page_url}),i.click(function(){o.toggleClass("addonify-wishlist-sticky-sidebar-is-visible")}),f(document).mouseup(function(i){var t;!f("body").hasClass("addonify-wishlist-sticky-sidebar-is-visible")||(t=f(".addonify-wishlist-ssc-body, #addonify-wishlist-show-sidebar-btn")).is(i.target)||0!==t.has(i.target).length||o.removeClass("addonify-wishlist-sticky-sidebar-is-visible")}),o.on("click",".addonify-wishlist-remove-notification",function(){f(this).parents(".addonify-wishlist-notification").remove()}),o.on("click","#addonify-wishlist-sidebar-form button",function(i){i.preventDefault();var o=f(this).parents("li"),d=f("#addonify-wishlist-sticky-sidebar-container .addonify-wishlist-ssc-footer"),a=(o.addClass("loading"),f(this)),i=f("#addonify-wishlist-sidebar-form").serialize()+"&"+encodeURI(a.attr("name"))+"="+encodeURI(a.attr("value"))+"&action="+encodeURI(addonify_wishlist_object.action_sidebar_form);f.post(addonify_wishlist_object.ajax_url,i,function(i){var t,s="";1==i.success?(s=i.data.msg,e.text(i.data.wishlist_count),1==i.data.remove_wishlist&&(f(document).trigger("addonify_removed_from_wishlist"),(t=f('button.added-to-wishlist[data-product_id="'+a.attr("value")+'"]')).find(".addonify-wishlist-btn-label").text(addonify_wishlist_object.add_to_wishlist_btn_text),t.find("i.icon.heart-style-one").removeClass("heart-style-one").addClass("heart-o-style-one"),t.removeAttr("disabled").removeClass("added-to-wishlist"),o.remove()),i.data.wishlist_count<1&&!f("#addonify-wishlist-sidebar-form.empty-wishlist").length&&f("#addonify-wishlist-sidebar-form").append('<p class="empty-wishlist">'+addonify_wishlist_object.wishlist_empty_label+"</p>")):s=i.data,o.removeClass("loading"),d.prepend('<div class="notice adfy-wishlist-sidebar-notice"><span>'+s+"</span></div>"),null!=i.data.redirect_url&&setTimeout(function(){window.location.href=i.data.redirect_url},2e3)},"json"),setTimeout(function(){d.find(".notice").fadeOut("fast",function(){f(this).remove()})},5e3)})})}(jQuery);