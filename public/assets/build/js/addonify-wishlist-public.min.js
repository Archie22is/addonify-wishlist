!function(_){"use strict";_(document).ready(function(){var o=_("body"),s=_("#addonify-wishlist-modal-wrapper"),d=_("#addonify-wishlist-modal-response"),i=_("#addonify-wishlist-show-sidebar-btn"),a=_("ul.adfy-wishlist-sidebar-items-entry"),e=_(".addonify-wishlist-count"),n=addonify_wishlist_object.show_popup,t="addonify-overlay-btn-wrapper",l="addonify-overlay-btn",c=_("."+t),h=_(".addonify-overlay-buttons");function r(i,t,s){_(".adfy-wishlist-icon-entry .adfy-wishlist-icon").hide(),_(".adfy-wishlist-icon-entry .adfy-wishlist-icon.adfy-status-"+s).show(),d.html(i.replace("{product_name}",t)),o.addClass("addonify-wishlist-modal-is-open")}c.length?h.each(function(){var i=_("button."+l,this).clone();_("button."+l,this).remove(),_("."+t,this).append(i)}):(h.each(function(){_("button."+l,this).wrapAll('<div class=" '+t+' " />')}),c=_("img.attachment-woocommerce_thumbnail").height(),_("."+t).css("height",c+"px"),_("."+t).hover(function(){_(this).css("opacity",1)},function(){_(this).css("opacity",0)})),_(".addonify-add-to-wishlist-btn button.added-to-wishlist").attr("disabled",!0),o.on("click",".addonify-add-to-wishlist-btn button",function(i){var t;i.preventDefault(),_(this).hasClass("added-to-wishlist")?n&&r(addonify_wishlist_object.product_already_in_wishlist_text,_(this).data("product_name")):(t=this,i={action:addonify_wishlist_object.action,id:_(t).data("product_id"),nonce:addonify_wishlist_object.nonce},addonify_wishlist_object.require_login&&!addonify_wishlist_object.is_logged_in?!addonify_wishlist_object.redirect_to_login||addonify_wishlist_object.is_logged_in?r(addonify_wishlist_object.login_msg,"","error"):window.location.replace(addonify_wishlist_object.login_url):(n?r(addonify_wishlist_object.product_added_to_wishlist_text,_(t).data("product_name"),"success"):("1"===addonify_wishlist_object.redirect_to_wishlist_if_popup_disabled&&window.location.replace(addonify_wishlist_object.wishlist_page_url),_(".addonify-wishlist-btn-label",t).text(addonify_wishlist_object.product_adding_to_wishlist_btn_label),_(t).attr("disabled",!0)),s.addClass("loading"),_.post(addonify_wishlist_object.ajax_url,i,function(i){s.removeClass("loading"),1==i.success?(_("#addonify-wishlist-sidebar-form .empty-wishlist").remove(),_(t).addClass("added-to-wishlist"),_(".addonify-wishlist-btn-label",t).text(addonify_wishlist_object.product_added_to_wishlist_btn_label),_("i.icon.heart-o-style-one",t).removeClass("heart-o-style-one").addClass("heart-style-one"),a.append(i.data.msg),e.text(i.data.wishlist_count)):r(addonify_wishlist_object.wishlist_not_added_label,_(t).data("product_name"),"error")},"json")))}),o.on("click","#addonify-wishlist-close-modal-btn",function(){o.removeClass("addonify-wishlist-modal-is-open")}),o.on("click","#addonify-wishlist-view-wishlist-btn",function(){window.location.href=addonify_wishlist_object.wishlist_page_url}),i.click(function(){o.toggleClass("addonify-wishlist-sticky-sidebar-is-visible")}),_(document).mouseup(function(i){var t;!_("body").hasClass("addonify-wishlist-sticky-sidebar-is-visible")||(t=_(".addonify-wishlist-ssc-body, #addonify-wishlist-show-sidebar-btn")).is(i.target)||0!==t.has(i.target).length||o.removeClass("addonify-wishlist-sticky-sidebar-is-visible")}),o.on("click","input.addonify-wishlist-check-all",function(){_("input.addonify-wishlist-product-id").prop("checked",_(this).prop("checked"))}),o.on("click",".addonify-wishlist-remove-notification",function(){_(this).parents(".addonify-wishlist-notification").remove()}),o.on("click","#addonify-wishlist-sidebar-form button",function(i){i.preventDefault();var o=_(this).parents("li"),d=_("#addonify-wishlist-sticky-sidebar-container .addonify-wishlist-ssc-footer"),a=(o.addClass("loading"),_(this)),i=_("#addonify-wishlist-sidebar-form").serialize()+"&"+encodeURI(a.attr("name"))+"="+encodeURI(a.attr("value"))+"&action="+encodeURI(addonify_wishlist_object.action_sidebar_form);_.post(addonify_wishlist_object.ajax_url,i,function(i){var t,s="";1==i.success?(s=i.data.msg,e.text(i.data.wishlist_count),1==i.data.remove_wishlist&&((t=_('button.added-to-wishlist[data-product_id="'+a.attr("value")+'"]')).find(".addonify-wishlist-btn-label").text(addonify_wishlist_object.add_to_wishlist_btn_text),t.find("i.icon.heart-style-one").removeClass("heart-style-one").addClass("heart-o-style-one"),t.removeAttr("disabled").removeClass("added-to-wishlist"),o.remove()),i.data.wishlist_count<1&&!_("#addonify-wishlist-sidebar-form.empty-wishlist").length&&_("#addonify-wishlist-sidebar-form").append('<p class="empty-wishlist">'+addonify_wishlist_object.wishlist_empty_label+"</p>")):s=i.data,o.removeClass("loading"),d.prepend('<div class="notice adfy-wishlist-sidebar-notice"><span>'+s+"</span></div>"),null!=i.data.redirect_url&&setTimeout(function(){window.location.href=i.data.redirect_url},2e3)},"json"),setTimeout(function(){d.find(".notice").fadeOut("fast",function(){_(this).remove()})},5e3)})})}(jQuery);